<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<link href="style.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

	<title>COM-480 Data visualization</title>

	<!-- Load d3.js -->
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<!-- Color scale -->
	<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
	<!--<script src="https://d3js.org/d3.v4.min.js"></script>-->
	<script src="js/graph4/pieChart.js"></script>
	<script src="js/graph4/pieLegend.js"></script>
	<script src="js/graph4/pieCompose.js" defer></script>
	<script src="js/graph3/map.js"></script>

	<style type="text/css">
		html {
			scroll-behavior: smooth;
		}

		body {
			width: "100%";
			height: "100vh";

			background-color: #e9e7e7;
			font-family: sans-serif;
			font-size: 100%;
			color: #333;
		}

		/*.float-container {
			border: 3px solid #fff;
			padding: 20px;
		}*/

		.float-child {
			/*width: 50%;*/
			float: left;
			/*padding: 10px;*/
			margin: 10px;
			/*border: 2px solid red;*/
		}

		/*#graph4 {
			font-family: sans-serif;
			background-color: black;
		}*/
	</style>

</head>

<body>

	<!-- Create a CENTERED TITLE-->
	<div style="text-align:center">
		<h1>COM-480 Data visualization</h1>
		<h2> Visualizing the worlwide influence of Animes</h2>
	</div>

	<!-- Create a NAVIGATION BAR-->
	<!-- <div class="topnav">
		<a href="#graph1">Graph 1</a>
		<a href="#graph2">Graph 2</a>
		<a href="#graph3">Graph 3</a>
		<a href="#graph4">Graph 4</a>
		<a href="#graph5">Graph 5</a>
	</div> -->


	<div id="graph1">
		<div class ="row no-gutters">
			<div class ="col-8 no-gutters">
				<div class="leftside">
				  <svg id = "plot" width="850" height="850"></svg>
				</div>
			</div>
			<div class ="col no-gutters">
					<div class="rightside">
					  <p id="year">year</p>
					  <p id="nb_ratings">percentage : </p>
					  <svg id = "plot_desc" width = "500" height = "850"></svg>
					</div>
			</div>
		</div>   
		<script src="js/graph1/groupedBarChart.js"></script>
		<script src="js/graph1/circles.js"></script>
	</div>

	<div id="graph2"></div>

	<div id="graph3">
		<h3> A very diverse community... </h3>
		<div id="map-options">
			<select id="countrySelector" class="form-control">
			</select>

			<button id="map-btn" class="btn btn-default">Filter</button>
		</div>

		<!-- World map -->
		<div class="float-container">
			<div class="float-child" style="width:70%">
				<svg id="map" class="svg-content" viewBox="100 0 870 450"></svg>
			</div>

			<!-- Info pane -->
			<div class="float-child">

				<div id="infoPane" class="info-pane">
					<p>Hover over a country to see the number of animes produced there.</p>

					<div id="infoPaneTitle" class="info-pane-title">
						<h2 id="countryName"></h2>
					</div>

					<div id="infoPaneContent" class="info-pane-content">
						<p id="numAnimes"></p>
					</div>

					<table id="rankTable">
						<caption> The countries with largest communities </caption>
						<thead>
							<tr>
								<th>Ranking</th>
								<th>Country</th>
								<th>Number of <i>otakus</i></th>
							</tr>
						</thead>
						<tbody></tbody>
					</table>

					<div id="genderPieChart"></div>
				</div>
			</div>

		</div>

	</div>

	<div id="graph4">
		<script>
			d3.csv("data/graph4_pie_chart/data.csv", function (error1, d) {
				if (error1) throw error1;


				//format data if required...
				//draw chart
				d3.csv("data/graph4_pie_chart/dataColors.csv", function (error2, c) {
					if (error2) throw error2;
					const compose = new ComposePieChart(d, c[0], 0, 0, 8, 12, '100%', '2000')
					compose.connectedCallback()
					//const compose = new Legend(c[0], 0, 0, '100%', '100%')
				});
			});            
		</script>
	</div>

	<div id="graph5"></div>

</body>

</html>