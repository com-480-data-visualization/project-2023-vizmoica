<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<link href="style.css" rel="stylesheet" type="text/css">

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
		crossorigin="anonymous"></script>

	<title>COM-480 Data visualization</title>

	<!-- Load d3.js -->
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<!--<script src="https://d3js.org/d3.v7.min.js"></script>-->

	<!-- Color scale -->
	<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

	<!-- Load JS code -->
	<script src="js/graph4/pieChart.js"></script>
	<script src="js/graph4/pieLegend.js"></script>
	<script src="js/graph4/pieCompose.js" defer></script>

</head>

<body>

	<!-- Create a CENTERED TITLE-->
	<div style="text-align:center">
		<h1>COM-480 Data visualization</h1>
		<h2> Visualizing the worlwide influence of Animes</h2>
	</div>

	<div id="graph1">
		<div class="row no-gutters">
			<div class="col-8 no-gutters">
				<div class="leftside">
					<svg id="plot" width="850" height="850"></svg>
				</div>
			</div>
			<div class="col no-gutters">
				<div class="rightside">
					<p id="year">year</p>
					<p id="nb_ratings">percentage : </p>
					<svg id="plot_desc" width="500" height="850"></svg>
				</div>
			</div>
		</div>
		<script src="js/graph1/groupedBarChart.js"></script>
		<script src="js/graph1/circles.js"></script>
	</div>

	<div id="graph2"></div>

	<div id="graph3">
		<h3 id="map-catchphrase"> A very diverse community... </h3>
		<div id="map-options">
			<select id="countrySelector" class="form-control">
			</select>

			<button id="map-btn" class="btn btn-default">Filter</button>
		</div>

		<div class="row no-gutters">
			<div class="col-7 no-gutters">
				<div class="leftside">
					<svg id="map" class="svg-content" viewBox="100 0 870 450"></svg>
				</div>
			</div>

			<div class="col no-gutters">
				<ul class="nav nav-tabs" id="myTab" role="tablist">
					<li class="nav-item" role="presentation">
						<button class="nav-link active" id="studio-tab" data-bs-toggle="tab" data-bs-target="#studio"
							type="button" role="tab" aria-controls="studio" aria-selected="true">Home</button>
					</li>
					<li class="nav-item" role="presentation">
						<button class="nav-link" id="country-tab" data-bs-toggle="tab" data-bs-target="#country"
							type="button" role="tab" aria-controls="country" aria-selected="false">Country</button>
					</li>
				</ul>
				<div class="tab-content" id="myTabContent">
					<!-- Default Pane -->
					<div class="tab-pane fade show active" id="studio" role="tabpanel" aria-labelledby="studio-tab">

						<table id="rankTable">
							<caption> The countries with largest communities </caption>
							<thead>
								<tr>
									<th>Ranking</th>
									<th>Country</th>
									<th>Number of <i>otakus</i></th>
								</tr>
							</thead>
							<tbody></tbody>
						</table>
					</div>

					<!-- Country Pane -->
					<div class="tab-pane fade" id="country" role="tabpanel" aria-labelledby="country-tab">
						<p>Select or hover on a country to visualize statistics about it.</p>

						<div class="container">
							<!-- Country general information -->
							<div class="row no-gutters" id="country-info" style="height: 100px";>
								<!-- Name + number of users -->
								<div class="col-9 no-gutters">
									<div class="leftside">
										<h2 id="countryName"></h2>
										<h4 id="numUsers"></h4>
									</div>
								</div>
								<!-- Flag -->
								<div class="col no-gutters">
									<svg id="country-flag"></svg>
								</div>
							</div>

							<!-- First row of stats -->
							<div class="row" id="country-stats-1">
								<!-- Top 3 animes -->
								<div class="col" id="country-top-animes">
									1 of 2
								</div>
								<!-- Top 5 studios -->
								<div class="col" id="country-top-studios">
									2 of 2
								</div>
							</div>

							<!-- Second row of stars -->
							<div class="row" id="country-stats-2">
								<!-- Gender pie chart -->
								<div class="col" id="country-gender-balance">
								</div>
								<!-- Age distribution histogram -->
								<div class="col" id="country-age-distribution">
									2 of 3
								</div>
							</div>
							<p>On average, an <it>otaku</it> has spent 50 days 22 hours 17 minutes watching animes
								(ranked #25)</p>

						</div>

					</div>
				</div>
			</div>
		</div>
		<script src="js/graph3/map.js"></script>

	</div>

	<div id="graph4">
		<script>
			d3.csv("data/graph4_pie_chart/data.csv", function (error1, d) {
				if (error1) throw error1;


				//format data if required...
				//draw chart
				d3.csv("data/graph4_pie_chart/dataColors.csv", function (error2, c) {
					if (error2) throw error2;
					const compose = new ComposePieChart(d, c[0], 0, 0, 8, 12, '100%', '2000')
					compose.connectedCallback()
					//const compose = new Legend(c[0], 0, 0, '100%', '100%')
				});
			});            
		</script>
	</div>

	<div id="graph5"></div>

</body>

</html>