<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Table Reshuffling Animation</title>
    <style>
        table {
            border-collapse: collapse;
        }

        th,
        td {
            border: 1px solid black;
            padding: 8px;
        }

        button {
            margin-bottom: 10px;
        }
    </style>
</head>

<body>
    <button id="btnData1">Data 1</button>
    <button id="btnData2">Data 2</button>
    <table id="myTable">
        <thead>
            <tr>
                <th>Column 1</th>
                <th>Column 2</th>
                <th>Column 3</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Row 1</td>
                <td>Row 2</td>
                <td>Row 3</td>
            </tr>
            <tr>
                <td>Row 2</td>
                <td>Row 1</td>
                <td>Row 3</td>
            </tr>
            <tr>
                <td>Row 3</td>
                <td>Row 3</td>
                <td>Row 3</td>
            </tr>
        </tbody>
    </table>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script>
        document.getElementById("btnData1").addEventListener("click", function () {
            shuffleTable(data1);
        });

        document.getElementById("btnData2").addEventListener("click", function () {
            shuffleTable(data2);
        });

        function shuffleTable(data) {
            const table = d3.select("#myTable");
            const rows = table.select("tbody").selectAll("tr").data(data, (_, i) => i);

            // Exit
            rows.exit()
                .style("opacity", 1)
                .transition()
                .duration(500)
                .style("opacity", 0)
                .remove();

            // Update
            rows.transition()
                .duration(500)
                .style("opacity", 1)
                .selectAll("td")
                .text((d, i) => d[i]);

            // Enter
            rows.enter()
                .append("tr")
                .style("opacity", 0)
                .transition()
                .duration(500)
                .style("opacity", 1)
                .selectAll("td")
                .data((d, i) => d)
                .enter()
                .append("td")
                .text((d, i) => d[i]);
        }

        // Initial data
        const data1 = [
            ["Row 1", "Row 2", "Row 3"],
            ["Row 2", "Row 1", "Row 3"],
            ["Row 3", "Row 3", "Row 3"]
        ];

        const data2 = [
            ["Row 2", "Row 1", "Row 3"],
            ["Row 1", "Row 2", "Row 3"],
            ["Row 3", "Row 3", "Row 3"]
        ];
    </script>
</body>

</html>